
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=1024, user-scalable=no">
    <style>
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0;}
      #map{ height: 100% }
    </style>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />

    <script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.js"></script>
    <script src="https://raw.github.com/calvinmetcalf/leaflet-ajax/master/dist/leaflet.ajax.min.js"></script>

    <title>Leaflet AJAX</title>
    </head>
    <body>

    <div id="map"></div>
      <script type="text/javascript">

    		var map = L.map('map').setView([37.3475, -121.8040], 11);
    		L.tileLayer('https://{s}.tiles.mapbox.com/v3/{id}/{z}/{x}/{y}.png', {
    			maxZoom: 18,
    			id: 'examples.map-20v6611k'
    		}).addTo(map);

        function popUp(f,l){
            var out = [];
            if (f.properties){
                for(key in f.properties){
                    out.push(key+": "+f.properties[key]);
                }
                l.bindPopup(out.join("<br />"));
            }
        }
        
        function style(feature) {
          var headway = feature.properties.headway_min;
          var hide = {color: '#000000', opacity: 0.0}
          if (feature.properties.trip_count < 10) {
            return hide;
          }
          if (headway <= 1000) {
            return {color: "#0011ff"}
          } else if (headway <= 4000) {
            return {color: "#ce69db", opacity: 0.2}
          } else {
            return hide
          }
        }
        
        function style_caltrain(feature) {
          return {color: '#ffbb00'}
        }
        
        function style_bart(feature) {
          return {color: '#ff3c00'}
        }
        
        var jsonTest = new L.GeoJSON.AJAX(["vta.geojson"],{style:style, onEachFeature:popUp}).addTo(map);
        var jsonTest = new L.GeoJSON.AJAX(["caltrain.geojson"],{style:style_caltrain, onEachFeature:popUp}).addTo(map);
        var jsonTest = new L.GeoJSON.AJAX(["bart.geojson"],{style:style_bart, onEachFeature:popUp}).addTo(map);
        console.log(jsonTest);

      </script>
       
        
    </body>
</html>
